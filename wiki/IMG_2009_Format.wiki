#summary Description of the new Image format
#labels Documentation

= Introduction =

I created a special image format to achieve better lossless compression on the Imperium Galactica files than a PNG or PCX type compression would.

The idea is simple: try different encoding and compression method and keep the best one:

  * Palette or without palette: replace colors with index, and use a common palette. The palette should contain only the colors for the used indexes, not the entire possible colors.
  * compute effective bit per pixel ratio (e.g 1 BPP, 12 BPP) and store the indexed images on bits
  * for &lt;9 BPP, try keeping the index size on 8BPP to allow a further compression to better capture patterns
  * try storing the image az raw 24bit (normal or transparent) or 32bit (= alpha channel) as  for small images, the palette might take up too much space in respect to the image data
  * try keeping it uncompressed (=no compression format overhead), GZIP-ped or ZIPped (maximum compression)

The preliminary results show, that recompressing 2089 PNG images results:

Uncompressed total image size: 149,639,816 bytes<br>
PNG compressed (mixed 8BPP and 32BPP): 13,724,378 bytes (9.17%)<br>
IMG_2009 compressed: 10,361,145 bytes(6.92%, 75.49% relative to the PNG)

However, the format itself is rather slower to compress and decompress, as the IO operation is bit sized. It is possible to speed it up when everything is 8, 16, 24 or 32 BPP.

= Details =
